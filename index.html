<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>画像と音楽の自動再生</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            overflow: hidden;
        }
        /* 画像を画面全体に表示 */
        .fullscreen-image {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover; /* 画像が全体を覆うように調整 */
        }
        /* 任意のクリック領域（自動再生の代替用） */
        .tap-area {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .tap-message {
            padding: 15px 30px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            border-radius: 30px;
            font-family: sans-serif;
            pointer-events: none; /* これがないとタップが検出されない場合がある */
            animation: fadeOut 2s forwards;
            animation-delay: 3s;
        }
        @keyframes fadeOut {
            to { opacity: 0; }
        }
        /* 非表示クラス */
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <!-- 全画面画像 -->
    <img src="https://via.placeholder.com/1920x1080" alt="" class="fullscreen-image" id="fullscreenImage">
    <!-- タップメッセージ（ブラウザの自動再生制限に対応） -->
    <div class="tap-area" id="tapArea">
        <div class="tap-message">画面をタップすると音楽が流れます</div>
    </div>
    <!-- 音声要素 -->
    <audio id="bgAudio" loop>
        <source src="" type="audio/mpeg">
    </audio>
    <script>
        // 画像と音声のURL設定
        document.getElementById('fullscreenImage').src = "./image.png"; // 実際の画像URLに変更
        document.getElementById('bgAudio').src = "./music.mp3"; // 実際の音声URLに変更
        // ページ読み込み完了時
        window.addEventListener('load', function() {
            const audio = document.getElementById('bgAudio');
            const tapArea = document.getElementById('tapArea');
            // 自動再生を試みる
            const playPromise = audio.play();
            if (playPromise !== undefined) {
                playPromise.then(_ => {
                    // 自動再生成功した場合はタップエリアを非表示
                    setTimeout(() => {
                        tapArea.classList.add('hidden');
                    }, 5000);
                })
                .catch(error => {
                    // 自動再生失敗（ほとんどのブラウザでこちらになる）
                    console.log("自動再生がブロックされました:", error);
                    // タップエリアを表示したまま
                });
            }
            // 画面タップで音楽再生
            tapArea.addEventListener('click', function() {
                audio.play();
                // クリック後、少し時間を置いてからメッセージを非表示
                setTimeout(() => {
                    document.querySelector('.tap-message').style.opacity = 0;
                }, 500);
            });
        });
    </script>
</body>
</html>
